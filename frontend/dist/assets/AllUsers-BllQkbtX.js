import{r as n,u as B,j as e,n as E,o as Z,D as z,w as F,M,v as L,c as u,B as m}from"./index-BYXiLfML.js";const v="https://ees121.com",V=({user:t,onClose:N})=>{var b,x,g,y,p;const[i,h]=n.useState(null);if(!t)return null;const d=c=>{h(i===c?null:c)};return e.jsxs("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:[e.jsxs("div",{className:"modal-content bg-white  rounded shadow-lg w-full sm:w-2/4 md:w-1/2 lg:w-1/3 max-w-6xl h-[80vh] overflow-hidden",children:[e.jsx("h2",{className:"text-xl font-bold my-4 text-center",children:"User Details"}),e.jsxs("div",{className:"modal-body overflow-x-auto ",children:[" ",e.jsx("table",{className:"table-auto w-full border-collapse border border-gray-300",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"ProfilePic"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("img",{src:t.profilePic,width:50,alt:""})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Name"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.name})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Email"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Contact"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.phone})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Address"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:`${(b=t==null?void 0:t.address)==null?void 0:b.area} ${(x=t==null?void 0:t.address)==null?void 0:x.city} ${(g=t==null?void 0:t.address)==null?void 0:g.state} ${(y=t==null?void 0:t.address)==null?void 0:y.country} ${(p=t==null?void 0:t.address)==null?void 0:p.pincode}`})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Name"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessName})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Category"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessCategory})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Address"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessAddress})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Aadhar"}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2 flex gap-2",children:[e.jsx("img",{src:t.frontAadhar,width:50,alt:"Front Aadhar",className:"cursor-pointer",onClick:()=>d(t.frontAadhar)}),e.jsx("img",{src:t.backAadhar,width:50,alt:"Back Aadhar",className:"cursor-pointer",onClick:()=>d(t.backAadhar)})]})]})]})})]}),e.jsx("div",{className:"flex justify-end m-4",children:e.jsx("button",{onClick:N,className:"btn btn-secondary w-full sm:w-auto",children:"Close"})})]}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 z-[60]",onClick:()=>h(null),children:e.jsx("img",{src:i,alt:"Zoomed Aadhar",className:"max-w-[90%] max-h-[90vh] object-contain",onClick:c=>c.stopPropagation()})})]})},R=()=>{const[t,N]=n.useState([]),[i,h]=n.useState(null),[d,b]=n.useState(""),[x,g]=n.useState(null),[y,p]=n.useState([]),[c,w]=n.useState("");n.useState({}),n.useState(!1);const k=B(),C=async()=>{var s,a;try{const l=(await(await u.get(`${v}/auth/getAllUser`,{headers:{"Content-Type":"application/json"}})).data).user.filter(f=>f.isAdminApproved===!0);N(l),console.log(l,"all")}catch(r){console.error("Error:",r.message),m((a=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:a.message)}},S=async()=>{try{const a=(await u.get(`${v}/category/getAllCategory`)).data.category.sort((r,o)=>r.categoryName.localeCompare(o.categoryName));p(a)}catch(s){console.error("Error fetching categories:",s)}};n.useEffect(()=>{C(),S()},[]);const D=async s=>{m.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete ?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>P(s),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",OnClick:m.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},P=async s=>{var a,r,o;m.dismiss();try{const l=await u.delete(`${v}/auth/deleteUser`,{headers:{"Content-Type":"application/json"},data:{id:s}});l.status===200&&(m((a=l==null?void 0:l.data)==null?void 0:a.message),C())}catch(l){console.error("Error:",l.message),m((o=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:o.message)}},U=s=>{h(s)},$=t.filter(s=>{if(x&&d==="date"){const a=new Date(s.createdAt).toLocaleDateString(),r=x.toLocaleDateString();return a===r}return c&&d==="category"?s.businessCategory.includes(c):!0}).sort((s,a)=>d==="A-Z"?a.name.localeCompare(s.name):d==="Z-A"?s.name.localeCompare(a.name):d==="date"?new Date(a.date)-new Date(s.date):0);return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(Z,{}),e.jsxs("div",{className:"my-32",children:[e.jsx("section",{className:"p-4",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Select Filter"}),e.jsxs("select",{id:"role",className:"form-select border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition",value:d,onChange:s=>b(s.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"A-Z",children:"A-Z"}),e.jsx("option",{value:"Z-A",children:"Z-A"}),e.jsx("option",{value:"date",children:"DATE"}),e.jsx("option",{value:"category",children:"Category"})]})]}),d==="date"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Date"}),e.jsxs("div",{className:"relative flex items-center mt-1",children:[e.jsx(z,{selected:x,onChange:s=>g(s),dateFormat:"yyyy-MM-dd",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition"}),e.jsx("span",{className:"absolute right-3 text-gray-500",children:e.jsx(F,{size:20})})]})]}),d==="category"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Category"}),e.jsxs("select",{className:"form-select border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition mt-1",value:c,onChange:s=>w(s.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),y.map(s=>e.jsx("option",{value:s.categoryName,children:s.categoryName},s._id))]})]})]})})})})}),e.jsx("section",{children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card bg-base-100 shadow-xl mt-5",children:[e.jsx("div",{className:"card-header text-xl text-bold z-0 py-3",children:"All Users"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table table-bordered z-30 border",children:[e.jsx("thead",{className:"text-bold text-[15px] text-black z-30 bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{children:"SrNo"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Business Name"}),e.jsx("th",{children:"Business Category"}),e.jsx("th",{children:"Business Address"}),e.jsx("th",{children:"ReffredBy"}),e.jsx("th",{children:"Payment Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:$.reverse().map((s,a)=>{var r,o,l,f,A;return e.jsxs("tr",{onClick:()=>U(s),children:[e.jsx("th",{children:a+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:`${(r=s==null?void 0:s.address)==null?void 0:r.area} ${(o=s==null?void 0:s.address)==null?void 0:o.city} ${(l=s==null?void 0:s.address)==null?void 0:l.state} ${(f=s==null?void 0:s.address)==null?void 0:f.country} ${(A=s==null?void 0:s.address)==null?void 0:A.pincode}`}),e.jsx("td",{children:s.businessName}),e.jsx("td",{children:s.businessCategory}),e.jsx("td",{children:s.businessAddress}),e.jsx("td",{children:s.referredBy.map(j=>j.name)}),e.jsx("td",{children:s.paymentVerified?e.jsx("button",{className:"btn btn-success btn-sm flex items-center gap-1",title:"Payment Verified",children:"Payment Verified"}):e.jsx("button",{className:"btn btn-danger btn-sm",title:"Payment Not Verified",children:"Payment Not Verified"})}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{onClick:j=>{j.stopPropagation(),D(s._id)},className:"btn-xl m-1 fs-3 text-primary",children:e.jsx(M,{})}),e.jsx("button",{onClick:j=>{j.stopPropagation(),k("/admin/editUser",{state:s})},className:"btn-xl fs-4 text-green-500",children:e.jsx(L,{})})]})]},s._id)})})]})})]})})}),i&&e.jsx(V,{user:i,onClose:()=>h(null)})]})]})};export{R as default};
