import{r as n,u as B,j as e,n as P,o as F,D as M,t as Z,M as z,s as L,c as y,B as i}from"./index-BlNj1_UZ.js";const f="https://ess-eta.vercel.app",O=({user:t,onClose:g})=>{var x,m,d,j,o;return t?e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"modal-content bg-white  rounded shadow-lg w-full sm:w-2/4 md:w-1/2 lg:w-1/3 max-w-4xl h-[80vh] overflow-hidden",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"User Details"}),e.jsxs("div",{className:"modal-body overflow-x-auto ",children:[" ",e.jsx("table",{className:"table-auto w-full border-collapse border border-gray-300",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"ProfilePic"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("img",{src:t.profilePic,width:50,alt:""})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Name"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.name})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Email"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Contact"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.phone})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Address"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:`${(x=t==null?void 0:t.address)==null?void 0:x.area} ${(m=t==null?void 0:t.address)==null?void 0:m.city} ${(d=t==null?void 0:t.address)==null?void 0:d.state} ${(j=t==null?void 0:t.address)==null?void 0:j.country} ${(o=t==null?void 0:t.address)==null?void 0:o.pincode}`})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Name"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessName})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Category"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessCategory})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Business Address"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:t.businessAddress})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold",children:"Aadhar"}),e.jsxs("td",{className:"border w-100 border-gray-300 px-4 py-2 d-flex",children:[e.jsx("div",{className:"col-6",children:e.jsx("div",{className:"img-adhar w-[200px] h-[200px]",children:e.jsx("img",{src:t.frontAadhar,className:"w-100 h-100 img-fluid",alt:""})})}),e.jsx("div",{className:"col-6",children:e.jsx("div",{className:"img-adhar  w-[200px] h-[200px]",children:e.jsx("img",{src:t.backAadhar,className:"w-100 h-100 img-fluid",alt:""})})})]})]})]})})]}),e.jsx("div",{className:"flex justify-between m-4",children:e.jsx("button",{onClick:g,className:"btn btn-secondary w-full sm:w-auto",children:"Close"})})]})}):null},_=()=>{const[t,g]=n.useState([]),[x,m]=n.useState(null),[d,j]=n.useState(""),[o,v]=n.useState(null),[C,w]=n.useState([]),[p,A]=n.useState("");n.useState({}),n.useState(!1);const D=B(),N=async()=>{var s,a;try{const l=(await(await y.get(`${f}/auth/getAllUser`,{headers:{"Content-Type":"application/json"}})).data).user.filter(b=>b.isAdminApproved===!0);g(l),console.log(l,"all")}catch(r){console.error("Error:",r.message),i((a=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:a.message)}},S=async()=>{try{const a=(await y.get(`${f}/category/getAllCategory`)).data.category.sort((r,c)=>r.categoryName.localeCompare(c.categoryName));w(a)}catch(s){console.error("Error fetching categories:",s)}};n.useEffect(()=>{N(),S()},[]);const k=async s=>{i.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete ?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>U(s),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",OnClick:i.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},U=async s=>{var a,r,c;i.dismiss();try{const l=await y.delete(`${f}/auth/deleteUser`,{headers:{"Content-Type":"application/json"},data:{id:s}});l.status===200&&(i((a=l==null?void 0:l.data)==null?void 0:a.message),N())}catch(l){console.error("Error:",l.message),i((c=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:c.message)}},$=s=>{m(s)},E=t.filter(s=>{if(o&&d==="date"){const a=new Date(s.createdAt).toLocaleDateString(),r=o.toLocaleDateString();return a===r}return p&&d==="category"?s.businessCategory.includes(p):!0}).sort((s,a)=>d==="A-Z"?a.name.localeCompare(s.name):d==="Z-A"?s.name.localeCompare(a.name):d==="date"?new Date(a.date)-new Date(s.date):0);return e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx(F,{}),e.jsxs("div",{className:"my-32",children:[e.jsx("section",{className:"p-4",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"role",className:"text-sm font-medium text-gray-700",children:"Select Filter"}),e.jsxs("select",{id:"role",className:"form-select border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition",value:d,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"A-Z",children:"A-Z"}),e.jsx("option",{value:"Z-A",children:"Z-A"}),e.jsx("option",{value:"date",children:"DATE"}),e.jsx("option",{value:"category",children:"Category"})]})]}),d==="date"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Date"}),e.jsxs("div",{className:"relative flex items-center mt-1",children:[e.jsx(M,{selected:o,onChange:s=>v(s),dateFormat:"yyyy-MM-dd",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition"}),e.jsx("span",{className:"absolute right-3 text-gray-500",children:e.jsx(Z,{size:20})})]})]}),d==="category"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Category"}),e.jsxs("select",{className:"form-select border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none transition mt-1",value:p,onChange:s=>A(s.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),C.map(s=>e.jsx("option",{value:s.categoryName,children:s.categoryName},s._id))]})]})]})})})})}),e.jsx("section",{children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card bg-base-100 shadow-xl mt-2",children:[e.jsx("div",{className:"card-header text-xl text-bold z-0 py-3",children:"All Users"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"max-h-[500px] overflow-y-auto scrollbar-thin scrollbar-thumb-blue-800 scrollbar-track-gray-200",children:e.jsxs("table",{className:"table table-bordered z-30 border p-5",children:[e.jsx("thead",{className:"text-bold text-[15px] text-black z-30",children:e.jsxs("tr",{children:[e.jsx("th",{children:"SrNo"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Contact"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Business Name"}),e.jsx("th",{children:"Business Category"}),e.jsx("th",{children:"Business Address"}),e.jsx("th",{children:"ReffredBy"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:E.reverse().map((s,a)=>{var r,c,l,b,u;return e.jsxs("tr",{onClick:()=>$(s),children:[e.jsx("th",{children:a+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:`${(r=s==null?void 0:s.address)==null?void 0:r.area} ${(c=s==null?void 0:s.address)==null?void 0:c.city} ${(l=s==null?void 0:s.address)==null?void 0:l.state} ${(b=s==null?void 0:s.address)==null?void 0:b.country} ${(u=s==null?void 0:s.address)==null?void 0:u.pincode}`}),e.jsx("td",{children:s.businessName}),e.jsx("td",{children:s.businessCategory}),e.jsx("td",{children:s.businessAddress}),e.jsx("td",{children:s.referredBy.map(h=>h.name)}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),k(s._id)},className:"btn-xl m-1 fs-3 text-primary",children:e.jsx(z,{})}),e.jsx("button",{onClick:h=>{h.stopPropagation(),D("/admin/editUser",{state:s})},className:"btn-xl fs-4 text-green-500",children:e.jsx(L,{})})]})]},s._id)})})]})})})]})})}),x&&e.jsx(O,{user:x,onClose:()=>m(null)})]})]})};export{_ as default};
