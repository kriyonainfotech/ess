import{G as N,r as l,i as Fe,u as Ae,j as e,A as Le,e as Be,P as Ee,d as ie,W as Ie,k as ce,m as c,c as oe,B as me}from"./index-Dm0S7hGc.js";function De(o){return N({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(o)}function Oe(o){return N({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.5 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"path",attr:{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]}]})(o)}function We(o){return N({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(o)}const ue="https://ees121.com",Me=()=>{const[o,xe]=l.useState(""),[y,v]=l.useState(""),[w,C]=l.useState(""),[S,P]=l.useState(""),[k,m]=l.useState(""),[F,u]=l.useState(""),[A,x]=l.useState(""),[L,p]=l.useState(""),[B,E]=l.useState(""),[Ue,pe]=l.useState(),[g,I]=l.useState([]),[D,O]=l.useState(""),[W,U]=l.useState(""),[z,M]=l.useState(""),[f,$]=l.useState(null),[he,R]=l.useState(null),[Z,G]=l.useState(!1),[ge,be]=l.useState([]),[j,H]=l.useState(!1),[J,fe]=l.useState(null),T=l.useState(null),[_,b]=l.useState(!1),s=Fe(),je=Ae(),Ne=t=>{I(t),G(!1)},ye=()=>{G(!Z)},ve=JSON.parse(localStorage.getItem("token")),we=async t=>{var a,n;b(!0);try{const i=await(await fetch(`https://api.postalpincode.in/pincode/${t}`)).json();if(console.log(i),i[0].Status==="Success"){const r=i[0].PostOffice[0];m(r.Name||""),u(r.District||""),x(r.State||""),p(r.Country||"")}else setError("Invalid Pincode! Please enter a valid one."),m(""),u(""),x(""),p("")}catch(d){setError(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch location details. Try again later.")}finally{b(!1)}},Ce=t=>{const a=t.target.value.trim();E(a),a.length===6?we(a):(m(""),u(""),x(""),p(""),setError(""))},Se=async()=>{try{const a=(await oe.get(`${ue}/category/getAllCategory`)).data.category.sort((n,d)=>n.categoryName.localeCompare(d.categoryName));be(a)}catch(t){console.error("Error fetching categories:",t)}};l.useEffect(()=>{Se()},[]);const q=t=>{const a=t.target.files[0];if(a){const n=URL.createObjectURL(a);console.log(n),$(a),R(n)}},K=()=>{H(t=>!t)},Pe=()=>{const t=T.current.getScreenshot();fe(t),H(!1),R(t)},ke=async t=>{var n,d,i;t.preventDefault();const a=new FormData;if(a.append("name",y),a.append("email",w),a.append("phone",S),a.append("address",JSON.stringify({area:k,city:F,state:A,country:L,pincode:B})),a.append("businessCategory",g),a.append("businessName",D),a.append("businessAddress",W),a.append("businessDetaile",z),J){const r=await(await fetch(J)).blob();a.append("image",r)}else f&&a.append("image",f);b(!0);try{const r=await oe.post(`${ue}/auth/updateProfile`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${ve}`}}),h=await r.data;console.log(h.message,"adited data"),xe(h),r.status===200&&(me(((n=r==null?void 0:r.data)==null?void 0:n.message)||"Profile Updated Successfully"),je("/profile"))}catch(r){return console.log(r),me((i=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:i.message),!1}finally{b(!1)}};return l.useEffect(()=>{var t,a,n,d,i,r,h,Q,V,X,Y,ee,se,te,ae,le,re,ne,de;v((t=s==null?void 0:s.state)==null?void 0:t.name),C((a=s==null?void 0:s.state)==null?void 0:a.email),P((n=s==null?void 0:s.state)==null?void 0:n.phone),m((i=(d=s==null?void 0:s.state)==null?void 0:d.address)==null?void 0:i.area),u((h=(r=s==null?void 0:s.state)==null?void 0:r.address)==null?void 0:h.city),x((V=(Q=s==null?void 0:s.state)==null?void 0:Q.address)==null?void 0:V.state),p((Y=(X=s==null?void 0:s.state)==null?void 0:X.address)==null?void 0:Y.country),E((se=(ee=s==null?void 0:s.state)==null?void 0:ee.address)==null?void 0:se.pincode),pe(((te=s==null?void 0:s.state)==null?void 0:te.address)||{}),I(((ae=s==null?void 0:s.state)==null?void 0:ae.businessCategory)||[]),O((le=s==null?void 0:s.state)==null?void 0:le.businessName),U((re=s==null?void 0:s.state)==null?void 0:re.businessAddress),M((ne=s==null?void 0:s.state)==null?void 0:ne.businessDetaile),$((de=s==null?void 0:s.state)==null?void 0:de.profilePic)},[s==null?void 0:s.state]),e.jsxs(e.Fragment,{children:[e.jsx(Le,{}),e.jsx(Be,{}),e.jsx("section",{className:"py-28",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h2",{className:"py-2",children:"Profile Setting"}),e.jsx("div",{className:"card border-0 bg-base-100 shadow-xl",children:e.jsxs("form",{action:"",onSubmit:ke,className:" p-3",children:[e.jsxs("div",{className:"profilepic d-flex justify-content-between",children:[e.jsx("label",{htmlFor:"profilePictureInput",className:`rounded-md m-3 cursor-pointer overflow-hidden ${j?"disabled":""}`,style:{position:"relative",width:"150px",height:"150px",objectFit:"cover",objectPosition:"center"},children:e.jsx("img",{src:he||f||Ee,alt:"Profile",className:"rounded-md img-flied w-100"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"hidden",name:"image",id:"profilePictureInput",disabled:j}),e.jsx("button",{type:"button",onClick:K,className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2",children:e.jsx(ie,{})}),e.jsxs("div",{className:"d-flex d-md-none",children:[e.jsx("label",{htmlFor:"cameraInput",className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2 cursor-pointer",children:e.jsx(ie,{})}),e.jsx("input",{type:"file",accept:"image/*",capture:"camera",id:"cameraInput",onChange:q,className:"hidden"})]}),j&&e.jsx("div",{className:"webcam-overlay d-none d-md-flex",children:e.jsxs("div",{className:"webcam-popup",children:[e.jsx(Ie,{audio:!1,ref:T,screenshotFormat:"image/jpeg",className:"webcam"}),e.jsx("button",{type:"button",onClick:Pe,className:"btn btn-primary mt-2",children:"Capture"}),e.jsx("button",{type:"button",onClick:K,className:"btn btn-secondary mt-2",children:"Close"})]})})]}),e.jsxs("div",{className:"form-detaile d-flex flex-wrap w-full py-2 d-flex",children:[e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Name"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"name",value:y,onChange:t=>v(t.target.value),className:" w-100 outline-0 "}),e.jsx(Oe,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Email"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"email",value:w,onChange:t=>C(t.target.value),className:" w-100 outline-0 "}),e.jsx(ce,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Contact "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:S,onChange:t=>P(t.target.value),className:" w-100 outline-0 "}),e.jsx(De,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Address"}),e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:k,onChange:t=>m(t.target.value),className:" w-100 outline-0 ",placeholder:"area"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:F,onChange:t=>u(t.target.value),className:" w-100 outline-0 ",placeholder:"city"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:A,onChange:t=>x(t.target.value),className:" w-100 outline-0 ",placeholder:"state"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 my-1",children:[e.jsx("input",{type:"text",value:L,onChange:t=>p(t.target.value),className:" w-100 outline-0 ",placeholder:"country"}),e.jsx(c,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:B,onChange:Ce,maxLength:"6",className:" w-100 outline-0 bg-none",placeholder:"pincode"}),e.jsx(c,{className:"text-xl"})]})})]})]})]}),e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Name "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:D,onChange:t=>O(t.target.value),className:" w-100 outline-0 "}),e.jsx(ce,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Category"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"border border-2 text-capitalize rounded-md p-2 bg-white",onClick:ye,children:g.length>0?e.jsx("span",{className:"inline-block px-3 text-black py-1  ",children:g}):e.jsx("span",{className:"text-gray-500 ps-3 py-1",children:"Select a category"})}),Z&&e.jsx("ul",{className:"z-10 border border-gray-300 bg-white w-full mt-2 rounded-md  max-h-40 overflow-y-auto",children:ge.map((t,a)=>e.jsx("li",{className:`cursor-pointer px-4 py-2 text-capitalize hover:bg-green-200 ${g===t.categoryName?"bg-green-200":""}`,onClick:()=>Ne(t.categoryName),children:t.categoryName},a))})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Address"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:W,onChange:t=>U(t.target.value),className:" w-100 outline-0 "}),e.jsx(c,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Detaile"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:z,onChange:t=>M(t.target.value),className:" w-100 outline-0 "}),e.jsx(c,{className:"text-xl"})]})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("button",{type:"submit",className:"d-flex justify-content-center bg-orange text-white px-4  py-3 px-2 rounded-md hover:bg-primary ",disabled:_,children:[" ",_?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):" Update",e.jsx(We,{className:"text-xl text-bold mx-2"})]})})]})})]})})})})]})};export{Me as default};
