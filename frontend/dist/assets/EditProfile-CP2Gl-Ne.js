import{G as w,r as l,i as $e,u as Ze,j as e,A as Te,d as Ge,k as He,m as pe,W as Je,n as he,o as i,c as be,B as ge}from"./index-CDisOkul.js";function qe(o){return w({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(o)}function _e(o){return w({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.5 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"path",attr:{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]}]})(o)}function Ke(o){return w({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(o)}const fe="https://ees121.com",Xe=()=>{const[o,je]=l.useState(""),[C,P]=l.useState(""),[S,k]=l.useState(""),[A,F]=l.useState(""),[L,m]=l.useState(""),[B,u]=l.useState(""),[E,x]=l.useState(""),[I,p]=l.useState(""),[D,U]=l.useState(""),[Qe,Ne]=l.useState(),[b,O]=l.useState([]),[R,W]=l.useState(""),[z,M]=l.useState(""),[$,Z]=l.useState(""),[f,j]=l.useState(null),[ve,N]=l.useState(null),[v,ye]=l.useState(null),[y,we]=l.useState(null),[T,Ce]=l.useState(null),[G,Pe]=l.useState(null),[H,J]=l.useState(!0),Se="https://res.cloudinary.com/dcfm0aowt/image/upload/v1739604108/user/phnbhd4onynoetzdxqjp.jpg",[q,_]=l.useState(!1),[ke,Ae]=l.useState([]),[K,Q]=l.useState(!1),[V,Fe]=l.useState(null),X=l.useState(null),[Y,g]=l.useState(!1),s=$e();console.log(s.state,"ls----------------");const Le=Ze(),Be=t=>{O(t),_(!1)},Ee=()=>{_(!q)};l.useEffect(()=>{var t,a,r;((t=s==null?void 0:s.state)==null?void 0:t.profilePic)===Se?J(!0):(j((a=s==null?void 0:s.state)==null?void 0:a.profilePic),N((r=s==null?void 0:s.state)==null?void 0:r.profilePic),J(!1))},[s==null?void 0:s.state]);const Ie=JSON.parse(localStorage.getItem("token")),De=async t=>{var a,r;g(!0);try{const c=await(await fetch(`https://api.postalpincode.in/pincode/${t}`)).json();if(console.log(c),c[0].Status==="Success"){const n=c[0].PostOffice[0];m(n.Name||""),u(n.District||""),x(n.State||""),p(n.Country||"")}else setError("Invalid Pincode! Please enter a valid one."),m(""),u(""),x(""),p("")}catch(d){setError(((r=(a=d.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch location details. Try again later.")}finally{g(!1)}},Ue=t=>{const a=t.target.value.trim();U(a),a.length===6?De(a):(m(""),u(""),x(""),p(""),setError(""))},Oe=async()=>{try{const a=(await be.get(`${fe}/category/getAllCategory`)).data.category.sort((r,d)=>r.categoryName.localeCompare(d.categoryName));Ae(a)}catch(t){console.error("Error fetching categories:",t)}};l.useEffect(()=>{Oe()},[]);const ee=t=>{const a=t.target.files[0];if(a){const r=URL.createObjectURL(a);console.log(r),j(a),N(r)}},Re=t=>{const a=t.target.files[0];if(a){const r=URL.createObjectURL(a);ye(a),Ce(r)}},We=t=>{const a=t.target.files[0];if(a){const r=URL.createObjectURL(a);we(a),Pe(r)}},se=()=>{Q(t=>!t)},ze=()=>{const t=X.current.getScreenshot();Fe(t),Q(!1),N(t)},Me=async t=>{var r,d,c;t.preventDefault();const a=new FormData;if(a.append("name",C),a.append("email",S),a.append("phone",A),a.append("address",JSON.stringify({area:L,city:B,state:E,country:I,pincode:D})),a.append("businessCategory",b),a.append("businessName",R),a.append("businessAddress",z),a.append("businessDetaile",$),a.append("frontAadhar",v),a.append("backAadhar",y),V){const n=await(await fetch(V)).blob();a.append("profilePic",n)}else f&&a.append("profilePic",f);g(!0);try{const n=await be.post(`${fe}/auth/updateProfile`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${Ie}`}}),h=await n.data;console.log(h.message,"adited data"),je(h),n.status===200&&(ge(((r=n==null?void 0:n.data)==null?void 0:r.message)||"Profile Updated Successfully"),Le("/profile"),setTimeout(()=>{window.location.reload()},4e3))}catch(n){return console.log(n),ge((c=(d=n==null?void 0:n.response)==null?void 0:d.data)==null?void 0:c.message),!1}finally{g(!1)}};return l.useEffect(()=>{var t,a,r,d,c,n,h,te,ae,le,re,ne,de,ce,ie,oe,me,ue,xe;P((t=s==null?void 0:s.state)==null?void 0:t.name),k((a=s==null?void 0:s.state)==null?void 0:a.email),F((r=s==null?void 0:s.state)==null?void 0:r.phone),m((c=(d=s==null?void 0:s.state)==null?void 0:d.address)==null?void 0:c.area),u((h=(n=s==null?void 0:s.state)==null?void 0:n.address)==null?void 0:h.city),x((ae=(te=s==null?void 0:s.state)==null?void 0:te.address)==null?void 0:ae.state),p((re=(le=s==null?void 0:s.state)==null?void 0:le.address)==null?void 0:re.country),U((de=(ne=s==null?void 0:s.state)==null?void 0:ne.address)==null?void 0:de.pincode),Ne(((ce=s==null?void 0:s.state)==null?void 0:ce.address)||{}),O(((ie=s==null?void 0:s.state)==null?void 0:ie.businessCategory)||[]),W((oe=s==null?void 0:s.state)==null?void 0:oe.businessName),M((me=s==null?void 0:s.state)==null?void 0:me.businessAddress),Z((ue=s==null?void 0:s.state)==null?void 0:ue.businessDetaile),j((xe=s==null?void 0:s.state)==null?void 0:xe.profilePic)},[s==null?void 0:s.state]),e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(Ge,{}),e.jsx("section",{className:"py-28",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h2",{className:"py-2",children:"Profile Setting"}),e.jsx("div",{className:"card border-0 bg-base-100 shadow-xl",children:e.jsxs("form",{action:"",onSubmit:Me,className:" p-3",children:[e.jsxs("div",{className:"profilepic d-flex justify-content-between",children:[e.jsx("label",{htmlFor:"profilePictureInput",className:`rounded-md m-3 cursor-pointer overflow-hidden ${K?"disabled":""}`,style:{position:"relative",width:"150px",height:"150px",objectFit:"cover",objectPosition:"center"},children:e.jsx("img",{src:ve||f||He,alt:"Profile",className:"rounded-md img-flied w-100"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:ee,className:"hidden",name:"profilePic",id:"profilePictureInput",disabled:!H}),e.jsx("button",{type:"button",onClick:se,disabled:!H,className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2",children:e.jsx(pe,{})}),e.jsxs("div",{className:"d-flex d-md-none",children:[e.jsx("label",{htmlFor:"cameraInput",className:"position-absolute top-36 start-36 p-2 bg-white rounded-full mx-2 cursor-pointer",children:e.jsx(pe,{})}),e.jsx("input",{type:"file",accept:"image/*",capture:"camera",id:"cameraInput",onChange:ee,className:"hidden"})]}),K&&e.jsx("div",{className:"webcam-overlay d-none d-md-flex",children:e.jsxs("div",{className:"webcam-popup",children:[e.jsx(Je,{audio:!1,ref:X,screenshotFormat:"image/jpeg",className:"webcam"}),e.jsx("button",{type:"button",onClick:ze,className:"btn btn-primary mt-2",children:"Capture"}),e.jsx("button",{type:"button",onClick:se,className:"btn btn-secondary mt-2",children:"Close"})]})})]}),e.jsxs("div",{className:"form-detaile d-flex flex-wrap w-full py-2 d-flex",children:[e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Name"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"name",value:C,onChange:t=>P(t.target.value),className:" w-100 outline-0 "}),e.jsx(_e,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:" Email"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"email",value:S,onChange:t=>k(t.target.value),className:" w-100 outline-0 "}),e.jsx(he,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Contact "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:A,onChange:t=>F(t.target.value),className:" w-100 outline-0 "}),e.jsx(qe,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Address"}),e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:L,onChange:t=>m(t.target.value),className:" w-100 outline-0 ",placeholder:"area"}),e.jsx(i,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:B,onChange:t=>u(t.target.value),className:" w-100 outline-0 ",placeholder:"city"}),e.jsx(i,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:E,onChange:t=>x(t.target.value),className:" w-100 outline-0 ",placeholder:"state"}),e.jsx(i,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 my-1",children:[e.jsx("input",{type:"text",value:I,onChange:t=>p(t.target.value),className:" w-100 outline-0 ",placeholder:"country"}),e.jsx(i,{className:"text-xl"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:D,onChange:Ue,maxLength:"6",className:" w-100 outline-0 bg-none",placeholder:"pincode"}),e.jsx(i,{className:"text-xl"})]})})]})]})]}),e.jsxs("div",{className:"col-12 col-md-6 p-2 w-full",children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Name "}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2",children:[e.jsx("input",{type:"text",value:R,onChange:t=>W(t.target.value),className:" w-100 outline-0 "}),e.jsx(he,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Category"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"border border-2 text-capitalize rounded-md p-2 bg-white",onClick:Ee,children:b.length>0?e.jsx("span",{className:"inline-block px-3 text-black py-1  ",children:b}):e.jsx("span",{className:"text-gray-500 ps-3 py-1",children:"Select a category"})}),q&&e.jsx("ul",{className:"z-10 border border-gray-300 bg-white w-full mt-2 rounded-md  max-h-40 overflow-y-auto",children:ke.map((t,a)=>e.jsx("li",{className:`cursor-pointer px-4 py-2 text-capitalize hover:bg-green-200 ${b===t.categoryName?"bg-green-200":""}`,onClick:()=>Be(t.categoryName),children:t.categoryName},a))})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Address"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:z,onChange:t=>M(t.target.value),className:" w-100 outline-0 "}),e.jsx(i,{className:"text-xl"})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold ",children:"Bussiness Detaile"}),e.jsxs("label",{htmlFor:"",className:"d-flex align-items-center border border-2 rounded-md p-2 m-1",children:[e.jsx("input",{type:"text",value:$,onChange:t=>Z(t.target.value),className:" w-100 outline-0 "}),e.jsx(i,{className:"text-xl"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold",children:"Aadhaar Front"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Re,className:"w-full border border-2 rounded-md p-2"}),T&&e.jsx("img",{src:T,alt:"Aadhaar Front Preview",className:"mt-2",style:{width:"200px"}})]}),e.jsxs("div",{className:"my-1",children:[e.jsx("label",{className:"block text-md font-medium p-2 text-bold",children:"Aadhaar Back"}),e.jsx("input",{type:"file",accept:"image/*",onChange:We,className:"w-full border border-2 rounded-md p-2"}),G&&e.jsx("img",{src:G,alt:"Aadhaar Back Preview",className:"mt-2",style:{width:"200px"}})]}),v&&y&&e.jsxs("div",{className:"modal",children:[e.jsx("h2",{children:"Upload Complete"}),e.jsxs("p",{children:["Aadhaar Front: ",v.name]}),e.jsxs("p",{children:["Aadhaar Back: ",y.name]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsxs("button",{type:"submit",className:"d-flex justify-content-center bg-orange text-white px-4  py-3 px-2 rounded-md hover:bg-primary ",disabled:Y,children:[" ",Y?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):" Save",e.jsx(Ke,{className:"text-xl text-bold mx-2"})]})})]})})]})})})})]})};export{Xe as default};
