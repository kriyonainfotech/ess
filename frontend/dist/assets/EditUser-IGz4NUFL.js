import{r as s,m as W,u as X,j as e,p as Y,q as Z,c as L,B as ee}from"./index-DuESt0g0.js";const O="https://ees121.com",ae=()=>{const[T,_]=s.useState([]),[h,y]=s.useState(""),[f,j]=s.useState(""),[N,v]=s.useState(""),[w,C]=s.useState(""),[k,c]=s.useState(""),[S,u]=s.useState(""),[q,m]=s.useState(""),[A,x]=s.useState(""),[te,d]=s.useState("");s.useState("");const[p,D]=s.useState([]),[z,H]=s.useState(""),[E,P]=s.useState(""),[B,U]=s.useState(""),[$,F]=s.useState(!1),[b,I]=s.useState(!1),a=W(),R=X(),G=async()=>{try{const r=(await L.get(`${O}/category/getAllCategory`)).data.category.sort((n,l)=>n.categoryName.localeCompare(l.categoryName));_(r)}catch(t){console.error("Error fetching categories:",t)}};s.useEffect(()=>{var t,r,n,l,i;G(),a!=null&&a.state&&(y(a.state.name||""),j(a.state.email||""),v(a.state.phone||""),c(((t=a.state.address)==null?void 0:t.area)||""),u(((r=a.state.address)==null?void 0:r.city)||""),m(((n=a.state.address)==null?void 0:n.state)||""),x(((l=a.state.address)==null?void 0:l.country)||""),C(((i=a.state.address)==null?void 0:i.pincode)||""),D(a.state.businessCategory||[]),H(a.state.businessName||""),P(a.state.businessAddress||""),U(a.state.businessDetaile||""))},[a]);const J=()=>F(!$),K=t=>{D(t),F(!1)},M=async t=>{try{const n=await(await fetch(`https://api.postalpincode.in/pincode/${t}`)).json();if(n[0].Status==="Success"){const l=n[0].PostOffice[0];c(l.Name||""),u(l.District||""),m(l.State||""),x(l.Country||""),d("")}else d("Invalid Pincode! Please enter a valid one."),g()}catch{d("Failed to fetch location details. Try again later."),g()}},g=()=>{c(""),u(""),m(""),x("")},Q=t=>{const r=t.target.value.trim();C(r),r.length===6?M(r):(g(),d(""))},V=async t=>{var l,i;t.preventDefault();const r={area:k,city:S,state:q,country:A,pincode:w},n={userId:a.state._id,name:h,email:f,phone:N,address:r,businessCategory:p,businessName:z,businessAddress:E,businessDetaile:B};I(!0);try{const o=await L.put(`${O}/auth/UpdateUser`,n,{headers:{"Content-Type":"application/json"},withCredentials:!0});o.status===200&&(ee(o.data.message),R(-1))}catch(o){console.error(o),d(((i=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to update user. Please try again.")}finally{I(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(Z,{}),e.jsx("div",{className:"bg-gray-200 pt-15 flex items-center mt-24 justify-center",children:e.jsx("div",{className:"w-[600px] bg-white rounded-lg overflow-hidden shadow-md mt-5 mx-2",children:e.jsxs("div",{className:"py-3 px-6 grid grid-cols-1 gap-6",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("h3",{className:"text-3xl font-semibold text-red-500 pt-3",children:"Edit User"})}),e.jsxs("form",{onSubmit:V,method:"post",className:"space-y-4 dark:text-white",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Name"}),e.jsx("input",{type:"text",value:h,onChange:t=>y(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Email"}),e.jsx("input",{type:"email",value:f,onChange:t=>j(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Contact"}),e.jsx("input",{type:"text",value:N,onChange:t=>v(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Area"}),e.jsx("input",{type:"text",value:k,onChange:t=>c(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Pincode"}),e.jsx("input",{type:"text",value:w,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"City"}),e.jsx("input",{type:"text",value:S,onChange:t=>u(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"State"}),e.jsx("input",{type:"text",value:q,onChange:t=>m(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Country"}),e.jsx("input",{type:"text",value:A,onChange:t=>x(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{className:"w-full mt-10",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Select Business Categories:"}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx("div",{className:"mt-1 block w-full border border-gray-300 rounded-md p-2",onClick:J,children:p.length>0?e.jsx("span",{className:"inline-block text-black py-1",children:p}):e.jsx("span",{className:"py-1",children:"Select a category"})}),$&&e.jsx("ul",{className:"z-10 border border-gray-300 bg-white w-full mt-2 rounded-md max-h-40 overflow-y-auto",children:T.map((t,r)=>e.jsx("li",{className:`cursor-pointer px-4 py-2 hover:bg-green-200 ${p===t.categoryName?"bg-green-200":""}`,onClick:()=>K(t.categoryName),children:t.categoryName},r))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Business Address"}),e.jsx("input",{type:"text",value:E,onChange:t=>P(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Business Detaile"}),e.jsx("input",{type:"text",value:B,onChange:t=>U(t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),e.jsx("button",{type:"submit",className:`w-full py-2 rounded-md ${b?"bg-gray-500":"bg-red-600"} text-white font-bold`,disabled:b,children:b?"Updating...":"Edit User"})]})]})})})]})};export{ae as default};
