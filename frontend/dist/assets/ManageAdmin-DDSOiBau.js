import{r as i,j as e,c as u,B as c,u as N,n as y,o as v,M as U,v as A}from"./index-CEGyEERR.js";const w="https://ees121.com",C=()=>{const[r,m]=i.useState(""),[x,b]=i.useState("User"),[o,d]=i.useState(null),[j,g]=i.useState(!1),s=async()=>{if(!r){d("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){d("Please enter a valid email address");return}d(null),g(!0);try{(await u.put(`${w}/auth/updateRoleByEmail`,{email:r,role:x})).status===200&&(c.success("User role updated successfully"),m(""),b("User"))}catch(n){n.response?d(n.response.data.message||"Something went wrong"):d("Network error or timeout")}finally{g(!1)}};return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsx("div",{className:"container mt-5",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h4",{className:"card-title mb-4",children:"Update User Role"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter Email",value:r,onChange:l=>m(l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"form-label",children:"Select Role"}),e.jsxs("select",{id:"role",className:"form-select",value:x,onChange:l=>b(l.target.value),children:[e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"User",children:"User"})]})]})]}),o&&e.jsx("p",{className:"text-danger",children:o}),e.jsx("button",{className:"btn bg-blue text-white mt-3",onClick:s,disabled:j,children:j?"Updating...":"Update Role"})]})})})})})})})},f="https://ees121.com",R=()=>{const[r,m]=i.useState([]),x=N(),[b,o]=i.useState(!1),d=async()=>{var s,l,n;try{o(!0);const t=await u.get(`${f}/auth/getAllUser`,{headers:{"Content-Type":"application/json"}}),h=(await t.data).user.filter(p=>p.role==="Admin");m(h),console.log(h,"AllUser"),t.status===200&&(c((s=t==null?void 0:t.data)==null?void 0:s.message),console.log("All User Successful..."))}catch(t){console.error("Error:",t.message),c((n=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:n.message)}finally{o(!1)}};i.useEffect(()=>{d()},[]);const j=async s=>{c.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete this request?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>g(s),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:c.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},g=async s=>{var l,n,t;c.dismiss();try{const a=await u.delete(`${f}/auth/deleteUser`,{headers:{"Content-Type":"application/json"},data:{id:s}});console.log(a.data,"delet data"),a.status===200&&(c((l=a==null?void 0:a.data)==null?void 0:l.message),console.log("User deleted successfully"),d())}catch(a){console.log(a),c((t=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:t.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(v,{}),e.jsx("div",{className:"mt-40",children:e.jsx(C,{})}),e.jsx("section",{className:"",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:" card bg-base-100 shadow-xl mt-5",children:[e.jsx("div",{className:"card-header text-xl text-bold z-30 py-3",children:"Admins"}),e.jsx("div",{className:"overflow-x-auto ",children:e.jsxs("table",{className:"table table-bordered  flex  z-0 border  p-5",children:[e.jsx("thead",{className:"text-bold text-[15px] text-black z-30",children:e.jsxs("tr",{children:[e.jsx("th",{children:"SrNo"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Contect"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"businessCategory"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:r.map((s,l)=>{var n,t,a,h,p;return e.jsxs("tr",{children:[e.jsx("th",{children:++l}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone}),e.jsxs("td",{children:[(n=s==null?void 0:s.address)==null?void 0:n.area," ",(t=s==null?void 0:s.address)==null?void 0:t.city," ",(a=s==null?void 0:s.address)==null?void 0:a.state," ",(h=s==null?void 0:s.address)==null?void 0:h.country," ",(p=s==null?void 0:s.address)==null?void 0:p.pincode]}),e.jsx("td",{children:s.businessCategory}),e.jsx("td",{children:s.role}),e.jsxs("td",{className:"d-flex",children:[e.jsx("button",{onClick:()=>j(s._id),className:"btn-xl m-1 fs-3 text-primary",children:e.jsx(U,{})}),e.jsx("button",{onClick:()=>x("/admin/editUser",{state:s}),className:"btn-xl fs-4 text-green-500",children:e.jsx(A,{})})]})]},l)})})]})})]})})})]})};export{R as default};
