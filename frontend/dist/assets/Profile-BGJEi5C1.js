import{r as d,j as e,c as f,B as p,M as v,U as y,u as w,A as k,d as A,P as B,e as C,f as S,L as E,g as P,h as F}from"./index-CDisOkul.js";import{s as u,a as b}from"./startSilver-5oWuoMuE.js";import{C as I}from"./CurrentLocation-BFdqXKpb.js";const R="https://ees121.com",L=()=>{const[s,m]=d.useState(null),[o,x]=d.useState(null),l=JSON.parse(localStorage.getItem("token")),[h,c]=d.useState(!1),g=i=>{const a=i.target.files[0];m(a),x(URL.createObjectURL(a))},n=async i=>{if(i.preventDefault(),!s){alert("Please upload an image");return}const a=new FormData;a.append("banner",s),console.log("FormData:",Object.fromEntries(a));try{c(!0);const t=await f.post(`${R}/banner/addBanner`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${l}`}});p("Banner Added Successfully"),window.location.reload(),m(null),x(null)}catch(t){console.error("Error details:",t),p(t.response.data.message)}finally{c(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:n,className:"flex flex-col items-center gap-4 p-4 border border-gray-300 rounded-lg shadow-md bg-white",children:[e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex items-center justify-center w-full max-w-xs h-24 border-2 border-dashed border-orange-500 text-orange-600 font-semibold rounded-lg hover:bg-orange-50 transition",children:"Add Offer Banner"}),e.jsx("input",{type:"file",id:"file-upload",name:"banner",onChange:g,className:"hidden"}),o&&e.jsx("img",{src:o,alt:"Preview",className:"w-48 h-auto rounded-md shadow-sm"}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition disabled:opacity-50",disabled:h,children:h?e.jsx("div",{className:"spinner-border text-white w-5 h-5 animate-spin",role:"status"}):"Add"})]})})},N="https://ees121.com",$=()=>{const[s,m]=d.useState([]),[o,x]=d.useState(null),l=JSON.parse(localStorage.getItem("token")),[h,c]=d.useState(!1);if(!l)return e.jsx("div",{children:"You must be logged in to view banners."});const g=async()=>{c(!0);try{const a=await f.get(`${N}/banner/getBanners`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}});if(a.status===200){const t=a.data;m(t.banners)}}catch(a){x("Error fetching banners. Please try again later."),console.error("Error fetching banners:",a)}finally{c(!1)}},n=async a=>{p.info(e.jsxs("div",{children:[e.jsx("p",{children:"Are you sure you want to delete this Banner?"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>i(a),children:"Yes"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:p.dismiss,children:"No"})]})]}),{autoClose:!0,closeOnClick:!0})},i=async a=>{p.dismiss();try{(await f.delete(`${N}/banner/deleteBanner`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},data:{bannerId:a}})).status===200&&(console.log("Banner deleted successfully"),g())}catch(t){x("Error deleting banner. Please try again later."),console.error("Error deleting banner:",t)}finally{c(!1)}};return d.useEffect(()=>{g()},[]),e.jsx("section",{className:"mt-3",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[o&&e.jsx("div",{className:"alert alert-danger",children:o}),s.length>0?s.map((a,t)=>e.jsx("div",{className:"col-md-4 p-1",children:e.jsxs("div",{className:"card card-banners h-100 w-100 overflow-hidden",children:[e.jsx("div",{className:"img-banner",style:{height:"100%"},children:e.jsx("img",{src:a.imageUrl,className:"card-img-top overflow-hidden img-fluid",style:{objectFit:"cover",height:"100%"},alt:a.description||"Banner"})}),e.jsx("div",{className:"banner-Btn",children:e.jsx("button",{className:"btn bg-orange text-white fs-4 p-2",onClick:()=>n(a._id),disabled:h,children:h?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(v,{})})})]})},t)):e.jsx("div",{children:"No banners available."})]})})})})},z=()=>{const{user:s}=d.useContext(y),[m,o]=d.useState(!1),x=w(),l=`${window.location.origin}/register?referralCode=${s==null?void 0:s._id}`,h=()=>{navigator.clipboard.writeText(l),o(!0),setTimeout(()=>o(!1),2e3)},c=(n=[],i=10)=>{const a=n.length>0?n.reduce((r,j)=>r+j,0)/n.length:0,t=[];for(let r=1;r<=i;r++)t.push(e.jsx("img",{src:r<=a?u:b,alt:r<=a?"Filled Star":"Empty Star",width:15},r));return t},g=(n=[],i=10)=>{const a=n.length>0?n.reduce((r,j)=>r+j,0)/n.length:0,t=[];for(let r=1;r<=i;r++)t.push(e.jsx("img",{src:r<=a?u:b,alt:r<=a?"Filled Star":"Empty Star",width:15},r));return t};return e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsx(A,{}),e.jsx(B,{}),e.jsxs("div",{className:"my-24",children:[e.jsx("section",{className:"",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"w-full bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{className:"w-full h-[200px] object-cover rounded-md",src:"https://img.freepik.com/free-vector/colorful-watercolor-texture-background_1035-19319.jpg?ga=GA1.1.897959581.1731651336&semt=ais_hybrid",alt:"Banner"}),e.jsx("div",{className:"absolute bottom-[-70px] right-14 w-[200px] h-[200px] rounded-full border-4 border-white ring-4 ring-orange-500 shadow-lg overflow-hidden",children:e.jsx("img",{src:s.profilePic,alt:"Profile",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"px-3 md:px-5",children:[e.jsxs("div",{className:"mt-24 md:mt-8 text-left sm:text-left",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-700",children:s==null?void 0:s.name}),s!=null&&s.profilePic?null:e.jsx("p",{className:"text-orange text-sm",children:"You haven't set a profile picture yet."}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"User Rating:"}),(s==null?void 0:s.userRatings)&&e.jsxs("div",{className:"flex items-center",children:[g(s==null?void 0:s.userRatings.map(n=>n.rating),10),e.jsxs("span",{className:"pl-2",children:[s==null?void 0:s.userAverageRating,".0"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-sm",children:"Provider Rating:"}),(s==null?void 0:s.providerRatings)&&e.jsxs("div",{className:"flex items-center",children:[c(s==null?void 0:s.providerRatings.map(n=>n.rating),10),e.jsxs("span",{className:"pl-2",children:[s==null?void 0:s.providerAverageRating,".0"]})]})]})]}),e.jsxs("div",{className:"mt-4 text-gray-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +91",s==null?void 0:s.phone]}),e.jsx(I,{user:s})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-100 p-4 rounded-md",children:[e.jsx("p",{className:"text-gray-600 font-medium",children:"Your Referral Link:"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-blue-600 font-medium truncate",children:l}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-blue-500",children:m?e.jsx(C,{size:20}):e.jsx(S,{size:20})}),e.jsx(E,{to:`whatsapp://send?text=${l}`,className:"text-white bg-orange text-sm p-2 rounded-md flex items-center",children:e.jsx(P,{size:16})})]}),m&&e.jsx("p",{className:"text-green-500 text-sm",children:"Copied!"})]}),e.jsxs("div",{className:"mt-4",children:[(s==null?void 0:s.userId)&&e.jsxs("p",{className:"text-gray-600 font-medium",children:["Unique ID: ",e.jsxs("span",{className:"text-gray-800 font-semibold",children:["EES121-",s==null?void 0:s.userId]})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Category: ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessCategory})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Details: ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessDetaile})]}),e.jsxs("p",{className:"text-gray-600 font-medium",children:["Business Address: ",e.jsx("span",{className:"text-gray-800 font-semibold",children:s==null?void 0:s.businessAddress})]}),e.jsxs("div",{className:"py-3",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Status: "}),e.jsx("span",{className:`font-semibold ${(s==null?void 0:s.userstatus)==="available"?"text-green-600":"text-red-600"}`,children:s==null?void 0:s.userstatus})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-md font-medium",children:"Aadhaar Front"}),s!=null&&s.frontAadhar?e.jsx("img",{src:s==null?void 0:s.frontAadhar,alt:"Aadhaar Front",className:"mt-2 w-[200px]"}):e.jsx("p",{children:"No Aadhaar Front uploaded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-md font-medium",children:"Aadhaar Back"}),s!=null&&s.backAadhar?e.jsx("img",{src:s==null?void 0:s.backAadhar,alt:"Aadhaar Back",className:"mt-2 w-[200px]"}):e.jsx("p",{children:"No Aadhaar Back uploaded"})]})]}),e.jsx("div",{className:"mt-6 flex justify-center sm:justify-end",children:e.jsx("button",{onClick:()=>x("/editprofile",{state:s}),className:"bg-orange text-white py-2 px-4 rounded-full font-semibold uppercase text-sm",children:"Edit Profile"})}),e.jsx("div",{className:"mt-6",children:e.jsx(L,{})})]})]})})})}),e.jsx($,{})]}),e.jsx(F,{})]})};export{z as default};
