import{r as a,U as T,u as V,j as e,N as z,l as B,a as G,b as J,L as K}from"./index-DIxwlOJk.js";function _(){const{user:C}=a.useContext(T),[i,P]=a.useState(""),[n,E]=a.useState(""),[o,q]=a.useState(""),[v,k]=a.useState(""),[l,L]=a.useState(""),[h,R]=a.useState(""),[f,d]=a.useState(""),[y,u]=a.useState(""),[j,m]=a.useState(""),[b,g]=a.useState(""),[Q,x]=a.useState(""),[X,F]=a.useState([]);a.useState("");const[Y,S]=a.useState(!1),[t,A]=a.useState({}),[c,U]=a.useState(null),[w,I]=a.useState(!1);localStorage.getItem("token");const O=V();if(C)return e.jsx(z,{to:"/"});const D=()=>{I(!w)};a.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("referralCode");r&&(console.log("[INFO] Referral code found in URL:",r),U(r))},[]);const M=()=>{const s={};return i||(s.name="Name is required."),n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?n.endsWith("@gmail.com")||(s.email="Please use your @gmail.com.com email."):s.email="Please enter a valid email address.":s.email="Email is required.",l?/^\d{10}$/.test(l)||(s.phone="Phone number must be exactly 10 digits."):s.phone="Phone number is required.",o?o.length<4&&(s.password="Password must be at least 4 characters long."):s.password="Password is required.",o!==v&&(s.confirmpassword="Passwords do not match."),f||(s.area="Area is required."),y||(s.city="City is required."),j||(s.state="State is required."),b||(s.country="Country is required."),h||(s.pincode="Pincode is required."),A(s),Object.keys(s).length===0},$=async s=>{try{const N=await(await fetch(`https://api.postalpincode.in/pincode/${s}`)).json();if(console.log(N),N[0].Status==="Success"){const p=N[0].PostOffice[0];d(p.Name||""),u(p.District||""),m(p.State||""),g(p.Country||""),x("")}else x("Invalid Pincode! Please enter a valid one."),d(""),u(""),m(""),g("")}catch{x("Failed to fetch location details. Try again later.")}},W=s=>{const r=s.target.value.trim();R(r),r.length===6?$(r):(d(""),u(""),m(""),g(""),x(""))},H=async s=>{if(S(!0),s.preventDefault(),!M()){S(!1);return}let r={area:f,city:y,state:j,country:b,pincode:h};F(r),console.log("Form data:",{name:i,email:n,password:o,phone:l,address:r,referralCode:c}),O("/registernext",{state:{name:i,email:n,password:o,confirmpassword:o,phone:l,address:r,referralCode:c}})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container py-24",children:e.jsx("div",{className:"row mx-auto ",children:e.jsxs("div",{className:"registerpage shadow bg-white p-0",children:[e.jsxs("div",{className:"col-12 d-flex flex-wrap",children:[e.jsx("div",{className:"col-12 col-lg-6 p-2 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"mb-12 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:B,width:100})})})})}),e.jsx("div",{className:"col-12 col-lg-6 ",children:e.jsx("div",{className:" bg-green-100 text-center hidden lg:flex  flex justify-center align-center",children:e.jsx("div",{className:"m-16 bg-cover bg-center bg-no-repeat ",children:e.jsx("img",{src:"https://readymadeui.com/signin-image.webp",width:300,alt:""})})})})]}),e.jsxs("form",{action:"",onSubmit:H,className:"py-5",children:[e.jsx("div",{className:"px-16",children:c&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Referral Code: ",c]}),e.jsx("input",{type:"hidden",value:c,name:"referralCode"})]})}),e.jsxs("div",{className:"col-12 d-flex flex-wrap justify-content-center p-5",children:[e.jsx("div",{className:"col-12 col-lg-6 p-1",children:e.jsxs("div",{className:"px-2",children:[e.jsx("input",{type:"text",value:i,onChange:s=>P(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",placeholder:"Name"}),t.name&&e.jsx("span",{className:"error text-orange text-sm",children:t.name}),e.jsx("input",{type:"email",value:n,onChange:s=>E(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-3",placeholder:"Email"}),t.email?e.jsx("span",{className:"error text-orange text-sm",children:t.email}):e.jsx("span",{className:"  text-gray text-sm",children:"Email must end with @gmail.com."}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:o,onChange:s=>q(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-3",type:w?"text":"password",placeholder:"Password"}),e.jsx("button",{type:"button",onClick:D,className:"absolute right-4 top-11",children:w?e.jsx(G,{}):e.jsx(J,{})})]}),t.password?e.jsx("span",{className:"error text-orange text-sm",children:t.password}):e.jsx("span",{className:"  text-gray text-sm",children:"Password must be at least 4 characters."}),e.jsx("input",{value:v,onChange:s=>k(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-3",type:"password",placeholder:"Confirm Password"}),t.confirmpassword&&e.jsx("span",{className:"error text-orange text-sm",children:t.confirmPassword})]})}),e.jsx("div",{className:"col-12 col-lg-6",children:e.jsxs("div",{className:"px-2 w-full",children:[e.jsxs("div",{className:"col-12 p-1",children:[e.jsx("input",{value:l,onChange:s=>L(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2 ",type:"text",placeholder:"Phone"}),t.phone?e.jsx("span",{className:"error text-orange text-sm",children:t.phone}):e.jsx("span",{className:" text-gray text-sm",children:"Phone number must be at least 10 digits."})]}),e.jsxs("div",{className:"col-12 d-flex flex-wrap justify-content-between",children:[e.jsxs("div",{className:"col-12 col-lg-6 p-1 ",children:[e.jsx("input",{value:f,onChange:s=>d(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",type:"text",placeholder:"Area"}),t.area&&e.jsx("span",{className:"error text-orange text-orange text-sm",children:t.area})]}),e.jsxs("div",{className:"col-12 col-lg-6 p-1",children:[e.jsx("input",{value:h,onChange:W,maxLength:"6",className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",type:"text",placeholder:"Pincode"}),t.pincode&&e.jsx("span",{className:"error text-orange text-orange text-sm",children:t.pincode})]}),e.jsxs("div",{className:"col-12 col-lg-6 p-1 ",children:[e.jsx("input",{value:y,onChange:s=>u(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",type:"text",placeholder:"City"}),t.city&&e.jsx("span",{className:"error text-orange text-orange text-sm",children:t.city})]}),e.jsxs("div",{className:"col-12 col-lg-6 p-1",children:[e.jsx("input",{value:j,onChange:s=>m(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",type:"text",placeholder:"State"}),t.state&&e.jsx("span",{className:"error text-orange text-orange text-sm",children:t.state})]}),e.jsxs("div",{className:"col-12 col-lg-6 p-1 ",children:[e.jsx("input",{value:b,onChange:s=>g(s.target.value),className:"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-2",type:"text",placeholder:"Country"}),t.country&&e.jsx("span",{className:"error text-orange text-orange text-sm",children:t.country})]})]})]})})]}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs("button",{type:"submit",className:"mt-3 tracking-wide font-semibold bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none",children:[e.jsxs("svg",{className:"w-6 h-6 -ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:7,r:4}),e.jsx("path",{d:"M20 8v6M23 11h-6"})]}),e.jsx("span",{className:"ml-4",children:"Sign Up Next"})]})}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Allready have an account? ",e.jsx(K,{to:"/login",className:"text-success text-bold hover:underline",children:"login "})]})]})]})})})})}export{_ as default};
