import{r as t,U as V,u as z,j as e,N as B,l as G,a as J,b as K,L as Q}from"./index-CDisOkul.js";function _(){const{user:C}=t.useContext(V),[p,P]=t.useState(""),[o,E]=t.useState(""),[n,q]=t.useState(""),[b,L]=t.useState(""),[i,k]=t.useState(""),[x,A]=t.useState(""),[h,l]=t.useState(""),[f,d]=t.useState(""),[y,c]=t.useState(""),[j,u]=t.useState(""),[X,m]=t.useState(""),[F,R]=t.useState([]);t.useState("");const[Y,S]=t.useState(!1),[r,U]=t.useState({}),[v,I]=t.useState(null),[w,D]=t.useState(!1);localStorage.getItem("token");const M=z();if(C)return e.jsx(B,{to:"/"});const O=()=>{D(!w)};t.useEffect(()=>{const a=new URLSearchParams(location.search).get("referralCode");a&&I(a)},[]);const $=()=>{const s={};return p||(s.name="Name is required."),o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?o.endsWith("@gmail.com")||(s.email="Please use your @gmail.com.com email."):s.email="Please enter a valid email address.":s.email="Email is required.",i?/^\d{10}$/.test(i)||(s.phone="Phone number must be exactly 10 digits."):s.phone="Phone number is required.",n?n.length<4&&(s.password="Password must be at least 4 characters long."):s.password="Password is required.",n!==b&&(s.confirmpassword="Passwords do not match."),h||(s.area="Area is required."),f||(s.city="City is required."),y||(s.state="State is required."),j||(s.country="Country is required."),x||(s.pincode="Pincode is required."),U(s),Object.keys(s).length===0},W=async s=>{try{const N=await(await fetch(`https://api.postalpincode.in/pincode/${s}`)).json();if(console.log(N),N[0].Status==="Success"){const g=N[0].PostOffice[0];l(g.Name||""),d(g.District||""),c(g.State||""),u(g.Country||""),m("")}else m("Invalid Pincode! Please enter a valid one."),l(""),d(""),c(""),u("")}catch{m("Failed to fetch location details. Try again later.")}},H=s=>{const a=s.target.value.trim();A(a),a.length===6?W(a):(l(""),d(""),c(""),u(""),m(""))},T=async s=>{if(S(!0),s.preventDefault(),!$()){S(!1);return}let a={area:h,city:f,state:y,country:j,pincode:x};R(a),console.log(F,"address"),M("/registernext",{state:{name:p,email:o,password:n,confirmpassword:n,phone:i,address:a,referralCode:v}})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mx-auto py-16",children:e.jsx("div",{className:"max-w-full mx-auto shadow-lg bg-white rounded-lg overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 p-8",children:[e.jsx("img",{src:G,width:100,alt:"Logo",className:"mb-6"}),e.jsx("img",{src:"https://readymadeui.com/signin-image.webp",width:300,alt:"Sign Up Illustration",className:"max-w-xs"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 text-center mb-3",children:"Create an Account"}),e.jsxs("form",{onSubmit:T,children:[v&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-gray-600 text-sm",children:"Referral Code:"}),e.jsx("input",{type:"text",value:v,disabled:!0,className:"w-full px-4 py-2 border rounded-md bg-gray-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:p,onChange:s=>P(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Full Name"}),r.name&&e.jsx("span",{className:"text-red-500 text-sm",children:r.name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",value:o,onChange:s=>E(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Email"}),r.email?e.jsx("span",{className:"text-red-500 text-sm",children:r.email}):e.jsx("span",{className:"text-gray-500 text-xs",children:"Email must end with @gmail.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:n,onChange:s=>q(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Password"}),e.jsx("button",{type:"button",onClick:O,className:"absolute right-4 top-3 text-gray-600",children:w?e.jsx(J,{}):e.jsx(K,{})}),r.password&&e.jsx("span",{className:"text-red-500 text-sm",children:r.password})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",value:b,onChange:s=>L(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Confirm Password"}),r.confirmpassword&&e.jsx("span",{className:"text-red-500 text-sm",children:r.confirmpassword})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("input",{type:"text",value:i,onChange:s=>k(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Phone Number"}),r.phone&&e.jsx("span",{className:"text-red-500 text-sm",children:r.phone})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsx("input",{type:"text",value:h,onChange:s=>l(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Area"}),e.jsx("input",{type:"text",value:x,onChange:H,maxLength:"6",className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Pincode"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsx("input",{type:"text",value:f,onChange:s=>d(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"City"}),e.jsx("input",{type:"text",value:y,onChange:s=>c(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"State"}),e.jsx("input",{type:"text",value:j,onChange:s=>u(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-green-400",placeholder:"Country"})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-300 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:7,r:4}),e.jsx("path",{d:"M20 8v6M23 11h-6"})]}),"Sign Up"]})}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Already have an account?",e.jsx(Q,{to:"/login",className:"text-success link-underline-success font-semibold hover:underline text-lg ml-1",children:"Log in"})]})]})]})]})})})})}export{_ as default};
