import{u as j,r,c as N,B as f,j as e,A as y,e as p,f as v,k as S}from"./index-DuESt0g0.js";import"./module-DFxX6XZm.js";import w from"./SearchBox-Ct7RnyML.js";const b="https://ees121.com",C=()=>{const o=j(),[c,h]=r.useState(()=>{const a=localStorage.getItem("categories");return a?JSON.parse(a):[]}),[A,l]=r.useState(c.length===0),[d,g]=r.useState(null),m=r.useCallback(async()=>{var a,i;l(!0);try{const s=await N.get(`${b}/category/getAllCategory`);if(console.log(s,"categories"),!s.data||!Array.isArray(s.data.category))throw new Error("Invalid data format");const n=Array.from(new Map(s.data.category.map(t=>[t.categoryName.toLowerCase(),t])).values()).sort((t,u)=>t.categoryName.localeCompare(u.categoryName)),x=localStorage.getItem("categories");!x||JSON.stringify(n)!==x?(localStorage.setItem("categories",JSON.stringify(n)),h(n)):console.log("ðŸŸ¢ No changes in categories, using cached data."),g(null)}catch(s){console.error("Error fetching categories:",s),g(((i=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch categories"),f.error("Error loading categories")}finally{l(!1)}},[]);return r.useEffect(()=>{m()},[m]),d?e.jsx("div",{className:"text-center p-4 text-danger",children:d}):e.jsx("section",{className:"mt-2",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row row-cols-3 row-cols-lg-5 g-3",children:c.map((a,i)=>e.jsx("div",{className:"col text-center",style:{cursor:"pointer"},onClick:()=>o("/serviceDetail",{state:a.categoryName}),children:e.jsxs("div",{className:"border-0 w-100 h-100 rounded-md",children:[e.jsx("figure",{className:"w-100 m-0 py-3 mb-2 border-orange rounded-4 d-flex justify-content-center align-items-center",children:e.jsx("img",{className:"img-fluid  overflow-hidden",style:{width:"100%",aspectRatio:"1/1",objectFit:"cover",maxWidth:"150px"},src:a.image,alt:a.categoryName})}),e.jsx("h6",{className:"text-md text-capitalize",children:a.categoryName})]})},a._id))})})})},F=()=>{const[o,c]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(y,{}),e.jsx(p,{}),e.jsx(v,{}),e.jsxs("div",{className:"my-32",children:[e.jsx("section",{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 d-lg-none pb-3",children:e.jsx(w,{})})})})}),o?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(C,{})]}),e.jsx(S,{})]})};export{F as default};
