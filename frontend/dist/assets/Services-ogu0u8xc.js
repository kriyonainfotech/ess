import{u,r,c as f,B as N,j as e,A as p,e as v,f as y,h as w}from"./index-DaZyjPYF.js";import{$ as S}from"./module-pzzDOAjr.js";import b from"./SearchBox-myITPqpf.js";const C="https://ees121.com",A=()=>{const c=u(),[t,h]=r.useState(()=>{const s=localStorage.getItem("categories");return s?JSON.parse(s):[]}),[x,i]=r.useState(t.length===0),[n,l]=r.useState(null),d=r.useCallback(async()=>{var s,g;if(!(t.length>0)){i(!0);try{const a=await f.get(`${C}/category/getAllCategory`);if(!a.data||!Array.isArray(a.data.category))throw new Error("Invalid data format");const m=Array.from(new Map(a.data.category.map(o=>[o.categoryName.toLowerCase(),o])).values()).sort((o,j)=>o.categoryName.localeCompare(j.categoryName));h(m),localStorage.setItem("categories",JSON.stringify(m)),l(null)}catch(a){console.error("Error fetching categories:",a),l(((g=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:g.message)||"Failed to fetch categories"),N.error("Error loading categories")}finally{i(!1)}}},[t.length]);return r.useEffect(()=>{d()},[d]),n?e.jsx("div",{className:"text-center p-4 text-danger",children:n}):e.jsx("section",{children:e.jsxs("div",{className:"container bd-orange",children:[e.jsx("div",{className:"row row-cols-3 row-cols-lg-5 overflow-hidden",children:t.map(s=>e.jsx("div",{className:"col",style:{cursor:"pointer"},onClick:()=>c("/serviceDetail",{state:s.categoryName}),children:e.jsxs("div",{className:"border-0 w-100 h-100 text-center items-center rounded-md",children:[e.jsx("figure",{className:"w-full m-0 p-2",children:e.jsx("img",{className:"img-fluid w-100 border-orange rounded-4 p-1 overflow-hidden",style:{objectFit:"cover"},src:s.image,alt:s.categoryName,loading:"lazy"})}),e.jsx("h6",{className:"text-md text-capitalize",children:s.categoryName})]})},s._id))}),x&&e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"10vh"},children:e.jsx(S,{color:"#00BFFF",height:50,width:50})})]})})},B=()=>{const[c,t]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(v,{}),e.jsx(y,{}),e.jsxs("div",{className:"my-32",children:[e.jsx("section",{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 d-lg-none pb-3",children:e.jsx(b,{})})})})}),c?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(A,{})]}),e.jsx(w,{})]})};export{B as default};
