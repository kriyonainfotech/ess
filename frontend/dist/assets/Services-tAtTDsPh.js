import{u,r,c as j,B as N,j as e,A as f,e as p,f as y,k as v}from"./index-CldPjNgY.js";import"./module-5bU49TEr.js";import w from"./SearchBox-BIp-_msN.js";const S="https://ees121.com",b=()=>{const c=u(),[t,x]=r.useState(()=>{const a=localStorage.getItem("categories");return a?JSON.parse(a):[]}),[C,n]=r.useState(t.length===0),[l,d]=r.useState(null),g=r.useCallback(async()=>{var a,i;if(!(t.length>0)){n(!0);try{const s=await j.get(`${S}/category/getAllCategory`);if(console.log(s,"categories"),!s.data||!Array.isArray(s.data.category))throw new Error("Invalid data format");const m=Array.from(new Map(s.data.category.map(o=>[o.categoryName.toLowerCase(),o])).values()).sort((o,h)=>o.categoryName.localeCompare(h.categoryName));x(m),localStorage.setItem("categories",JSON.stringify(m)),d(null)}catch(s){console.error("Error fetching categories:",s),d(((i=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to fetch categories"),N.error("Error loading categories")}finally{n(!1)}}},[t.length]);return r.useEffect(()=>{g()},[g]),l?e.jsx("div",{className:"text-center p-4 text-danger",children:l}):e.jsx("section",{className:"mt-2",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row row-cols-3 row-cols-lg-5 g-3",children:t.map((a,i)=>e.jsx("div",{className:"col text-center",style:{cursor:"pointer"},onClick:()=>c("/serviceDetail",{state:a.categoryName}),children:e.jsxs("div",{className:"border-0 w-100 h-100 rounded-md",children:[e.jsx("figure",{className:"w-100 m-0 py-3 mb-2 border-orange rounded-4 d-flex justify-content-center align-items-center",children:e.jsx("img",{className:"img-fluid  overflow-hidden",style:{width:"100%",aspectRatio:"1/1",objectFit:"cover",maxWidth:"150px"},src:a.image,alt:a.categoryName})}),e.jsx("h6",{className:"text-md text-capitalize",children:a.categoryName})]})},a._id))})})})},F=()=>{const[c,t]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(p,{}),e.jsx(y,{}),e.jsxs("div",{className:"my-32",children:[e.jsx("section",{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 d-lg-none pb-3",children:e.jsx(w,{})})})})}),c?e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}):e.jsx(b,{})]}),e.jsx(v,{})]})};export{F as default};
