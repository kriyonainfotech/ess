import{r as s,U as g,j as e,c as u,A as p,e as w,f as N,h as v}from"./index-BJcydSwj.js";const y="https://ess-eta.vercel.app",b=({walletBalance:a})=>{const{user:t}=s.useContext(g),[i,x]=s.useState(0);s.useState([]);const[d,c]=s.useState(!0),[r,h]=s.useState(null);s.useEffect(()=>{(async()=>{var n,m,j;if(t!=null&&t._id){c(!0);try{const l=await u.get(`${y}/referal/earnings/${t==null?void 0:t._id}`);l.status===200?x(l.data.earnings):h(((n=l==null?void 0:l.data)==null?void 0:n.message)||"Failed to fetch earnings")}catch(l){h(((j=(m=l.response)==null?void 0:m.data)==null?void 0:j.message)||"Something went wrong")}finally{c(!1)}}})()},[t==null?void 0:t._id]);const o=()=>{a>=120?console.log(`Withdrawal successful: ₹${i}`):alert("Insufficient balance for withdrawal.")};return r?e.jsxs("p",{children:["Error: ",r]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-4 col-md-4 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card w-100 rounded-1 border-0 shadow-xl p-2 py-3",children:e.jsxs("div",{className:"d-flex flex-column gap-3 align-items-center justify-content-center",children:[e.jsx("span",{className:"text-capitalize",children:"Total"}),e.jsxs("h3",{children:["₹",a||0]})]})})}),e.jsx("div",{className:"col-4 col-md-4 d-flex align-items-center justify-content-center p-1",children:e.jsx("div",{className:"card w-100 rounded-1 border-0 shadow-xl p-2 py-3",children:e.jsxs("div",{className:"d-flex flex-column gap-3 align-items-center justify-content-center",children:[e.jsx("span",{className:"text-capitalize",children:"Transfer"}),e.jsxs("h3",{children:["₹",0]})]})})}),e.jsx("div",{className:"col-4 col-md-4 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card w-100 rounded-1 border-0 shadow-xl p-2 py-3 cursor-pointer",children:e.jsxs("button",{className:"d-flex flex-column gap-3 align-items-center justify-content-center",onClick:o,disabled:a<i,children:[e.jsx("span",{className:"text-capitalize",children:"Withdraw"}),e.jsxs("h3",{children:["₹",0]})]})})})]})},E="https://ess-eta.vercel.app",S=()=>{const{user:a}=s.useContext(g),[t,i]=s.useState(0);s.useState([]);const[x,d]=s.useState(!0),[c,r]=s.useState("");return s.useEffect(()=>{(async()=>{var o,f;if(!(a!=null&&a._id)){r("User is not authenticated"),d(!1);return}try{const n=await u.get(`${E}/referal/getUserWalletBalance/${a._id}`);console.log(n.data,"wallete"),i(n.data.walletBalance),d(!1)}catch(n){r(((f=(o=n==null?void 0:n.response)==null?void 0:o.data)==null?void 0:f.message)||"Error fetching wallet balance")}finally{d(!1)}})()},[a==null?void 0:a._id]),e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(w,{}),e.jsx(N,{}),e.jsx("div",{className:"my-32",children:e.jsx("section",{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"wallete text-white",children:e.jsx("div",{className:"col-12 d-flex flex-wrap p-4 rounded-1 bg-blue align-items-center",children:x?e.jsx("div",{children:e.jsx("div",{className:"spinner-border text-light",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})}):c?e.jsx("div",{className:"alert alert-danger",children:c}):e.jsx(b,{walletBalance:t})})})})})})}),e.jsx(v,{})]})},_=s.memo(S);export{_ as default};
